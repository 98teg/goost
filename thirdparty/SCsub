#!/usr/bin/env python
import os

Import("env_goost")

env_thirdparty = env_goost.Clone()

env_thirdparty.Prepend(CPPPATH=[os.path.realpath(".")])
env_goost.Prepend(CPPPATH=[os.path.realpath(".")])

if env_goost["goost_math_enabled"]:
    env_thirdparty.add_source_files(env_goost.modules_sources, "clipper/*.cpp")
if env_goost["goost_image_enabled"]:
    # Leptonica.
    env_leptonica = env_thirdparty.Clone()
    env_leptonica.add_source_files(env_goost.modules_sources, "leptonica/*.c")
    if env_goost["target"] in ["debug", "release_debug"]:
        env_leptonica.Prepend(CPPDEFINES=["DEBUG"])
    env_leptonica.Prepend(CPPDEFINES=["NO_CONSOLE_IO"])
    # TODO: likely need to configure endianess properly on some platforms.
    env_leptonica.disable_warnings()

    # Rest of the libraries.
    env_thirdparty.add_source_files(env_goost.modules_sources, "exoquant/*.c")
    env_thirdparty.add_source_files(env_goost.modules_sources, "hqx/*.cc")

env_thirdparty.disable_warnings()
